# AI 에이전트 팀 구성 (Role-Based Agents)

## 개요

모든 에이전트는 서로의 작업 컨텍스트를 직접 공유하지 않는다. 대신 **SSOT(Single Source of Truth)** 원칙에 따라 **OpenSpec 문서와 소스 코드로만 소통**하여 정보의 오염을 방지한다.

---

## 팀 구성원 (Agents)

### 1. 사용자 (Human)
- **역할**: '하고 싶은 일'에 대한 **원대한 계획(Plan)**을 수립하고 오케스트레이터와 소통한다.
- **책임**: 최종 결과물의 **비즈니스 로직 적합성 판단** 및 배포 승인한다.

### 2. 오케스트레이터 (a. Orchestrator)
- **보유 스킬**: `openspec-workflow`, `backlog-api`, `github-mcp`
- **역할**: 사용자의 의도를 분석하여 **하위 에이전트(b~f)에게 업무를 배정**하고 **전체 흐름을 제어**한다.

### 3. 스펙 디자이너 & 리뷰어 (b, c. Spec Team)
- **디자이너**: `plan.md`를 분석해 **OpenSpec 표준 규격에 맞는 상세 설계서**를 생성한다.
- **리뷰어**: **Copilot CLI**를 호출하여 설계의 결함, 엣지 케이스 누락, Backlog 티켓과의 정합성을 체크한다.
  - 결과물: `reviews/` 폴더

### 4. 구현 및 코드 리뷰어 (d, e. Dev Team)
- **구현(Applier)**: 승인된 스펙을 바탕으로 **실제 코드를 작성**한다. `tasks.md`를 체크리스트로 활용한다.
- **코드 리뷰어**: 구현된 코드가 **스펙과 일치하는지, 한국 정보보안 가이드라인 및 성능 컨벤션을 준수**하는지 검증한다.

### 5. 테스터 (f. QA Agent)
- **역할**: **Chrome DevTools MCP**를 연동하여 **실제 UI 상에서 기능이 동작하는지 확인**한다.
- **원칙**: 코드 리뷰만으로는 'Pass'할 수 없으며, **반드시 실제 런타임 검증 결과가 포함**되어야 한다.

---

## 개발 워크플로우 (Phases)

### Phase 1: 이슈 등록 (Ticket Creation)
현업 부서나 기획자의 요구사항 혹은 개인적인 아이디어를 **Backlog에 간단히 등록**한다. 이때 생성되는 과제 키(예: ABC-001)는 **모든 문서와 코드 변경 사항의 핵심 식별자(SsoT)**가 된다.

---

### Phase 2: 기획 고도화 (Plan & Discovery)
Claude Code의 **Plan 모드**를 활성화하고 "ABC-001 과제를 진행해줘"라고 요청한다.

- **CC의 역할**: Backlog에서 이슈 내용을 읽어온 후, **기존 소스 코드와 관련 문서를 분석**하여 **초안 계획**을 제시한다.
- **상호작용**: 개발자(인간)는 **CC의 질문에 답변하거나 계획의 미비점을 지적**하며 설계를 정교화한다.
- **동기화**: 계획이 확정되면 **CC가 해당 내용을 Backlog 이슈 댓글에 자동으로 기록**하여 이력을 보존한다.

---

### Phase 3: 스펙 설계 (Spec Design)
확정된 플랜을 바탕으로 **CC가 서브 에이전트인 `openspec-designer`에게 작업을 지시**한다. 다음의 표준 문서 세트가 생성된다:

- **`proposal.md`**: 제안 개요 및 배경
- **`spec.md`**: 상세 기술 스펙 및 비즈니스 로직
- **`tasks.md`**: 구현해야 할 단계별 태스크 리스트
- **`references/plan.md`**: 추적성을 위한 원본 플랜 저장

---

### Phase 4: 스펙 검증 (Spec Review)
`openspec-reviewer`가 기동된다. **Copilot CLI**를 활용하여 작성된 스펙의 **모순, 엣지 케이스 누락, 보안 취약점**을 검토한다. 

결함 발견 시 **디자이너에게 수정을 요청**하며, **최대 10회까지 자가 교정(Self-Correction)**을 거쳐 PASS를 획득한다.

---

### Phase 5: 코드 구현 (Implementation)
`openspec-applier`가 승인된 `spec.md`와 `tasks.md`를 **가이드라인 삼아 실제 코드를 작성**한다. 

이때 AI는 **불필요한 코드 생성을 지양**하고 **정의된 태스크 단위로 빌드가 가능한 상태**를 유지하며 코딩한다.

---

### Phase 6: 코드 리뷰 (Code Review)
`openspec-code-reviewer`가 등판하여 **구현된 코드가 당초 설계한 spec.md와 일치하는지 대조**한다. 

**스펙과 괴리가 있거나 컨벤션을 어긴 경우** 구현 에이전트에게 **수정을 지시**한다. (PASS 시까지 반복)

---

### Phase 7: 자동화 테스트 (Automated Testing)
`openspec-tester`가 **유닛 테스트 및 Chrome DevTools MCP**를 이용한 **E2E 테스트**를 수행한다.

- **2026년 기준**: 단순히 "코드가 돌아간다"를 넘어 **실제 브라우저 렌더링 결과와 API 응답 속도 등**을 종합적으로 검증한다.
- 실패 시 **구현 단계로 롤백**하여 수정 루프를 돈다.

---

### Phase 8: PR 생성 (Pull Request)
모든 검증 과정을 통과하면, **CC는 Backlog Git 리포지토리에 풀 리퀘스트(PR)를 생성**한다. 

PR 본문에는 **OpenSpec의 주요 내용과 테스트 결과 요약**이 자동으로 포함된다.

---

### Phase 9: 최종 승인 및 머지 (Final Human Review)
인간 개발자가 **최종적으로 PR의 코드를 훑어보고 동작을 확인**한다. 

AI 에이전트 팀이 이미 수차례 검증을 마쳤으므로, **인간은 비즈니스 가치에 집중**하여 **리뷰한 뒤 마스터 브랜치에 머지(Merge)**한다.

---

## 핵심 원칙

1. **SSOT (Single Source of Truth)**: 모든 에이전트는 OpenSpec 문서와 소스 코드만을 통해 소통
2. **역할 분담**: 각 에이전트는 명확한 책임과 권한을 가지고 독립적으로 작업
3. **자동화된 검증**: 스펙 검증 → 코드 리뷰 → 자동화 테스트의 다단계 품질 관리
4. **인간 중심**: 최종 의사결정과 비즈니스 가치 판단은 항상 인간이 수행
5. **추적 가능성**: Backlog 티켓 ID를 중심으로 모든 산출물이 연결됨

---

## 참고사항

- **보유 스킬**: `openspec-workflow`, `backlog-api`, `github-mcp`, `Copilot CLI`, `Chrome DevTools MCP`
- **표준 문서 세트**: `proposal.md`, `spec.md`, `tasks.md`, `references/plan.md`, `reviews/`
- **자가 교정**: 스펙 리뷰어는 최대 10회까지 자동으로 수정 시도
- **E2E 테스트**: 2026년 기준으로 실제 브라우저 렌더링 및 API 응답 속도까지 검증